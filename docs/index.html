<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="description" content="TS2 WebClient – un portale leggero e immediato per accedere al mondo di Tempora Sanguinis direttamente dal browser. Scarica il client per Windows, Linux o Mac.">
<meta name="keywords" content="TS2, Tempora Sanguinis, WebClient, client, download, RPG, MUD, gioco di ruolo">
<meta name="author" content="Marino Šimić">
<meta property="og:title" content="TS2 WebClient – gioca a Tempora Sanguinis">
<meta property="og:description" content="Accedi al mondo di Tempora Sanguinis dal browser o scarica il client per Windows, Linux e Mac.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://temporasanguinis.github.io/TS2-Client/">
<meta property="og:image" content="https://temporasanguinis.github.io/TS2-Client/favicon-512x512.png">
<link href="favicon-512x512.png" rel="icon" type="image/png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TS2 Client – gioca a Tempora Sanguinis</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: "Georgia", serif;
      background:url(https://www.temporasanguinis.it/sitefiles/back1.jpg);
      color: #f0e6d2;
    }

    .overlay {
      background: rgba(0, 0, 0, 0.65);
      min-height: 100vh;
      padding: 40px 20px;
    }

	p {
		line-height: 1.4;
		color: #cc9b9b;
	}
	
	.contrib {
	}
	
    h1 {
      text-align: center;
      font-size: 48px;
      margin-bottom: 10px;
      text-shadow: 2px 2px 6px #000;
	  color: #9c0000;
    }
	
	h2 {
		margin: 0px 15px 10px 15px;
		color: #cc9b9b;
	}
	
	h3 {
		margin: 0px 15px 10px 15px;
		color: #cc9b9b;
	}

    .subtitle {
      text-align: center;
      font-size: 20px;
      margin-bottom: 40px;
      opacity: 0.9;
    }

    .section {
      max-width: 900px;
      margin: 0 auto 40px auto;
      background: rgba(20, 20, 20, 0.75);
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 0 10px #000;
    }

.contrib {
background: rgba(30, 20, 15, 0.85);
      padding: 25px;
      margin-bottom: 40px;
      border-radius: 10px;
      border: 2px solid #3f3b35;
      box-shadow: 0 0 12px rgba(0,0,0,0.6);
    background-color: #8b6f47;
    float: right;
    position: absolute;
    right: 25px;
    top: 25px;
}
    .release {
      background: rgba(30, 20, 15, 0.85);
      padding: 25px;
      margin-bottom: 40px;
      border-radius: 10px;
      border: 2px solid #3f3b35;
      box-shadow: 0 0 12px rgba(0,0,0,0.6);
    }
	.release-header {
	  display: flex;
	  justify-content: space-between;
	  align-items: center;
	  font-size: 18px;
	  margin-bottom: 10px;
	}

	.release-title {
	  font-weight: bold;
	  font-size: 22px;
	}

	.release-date {
	  opacity: 0.85;
	  font-size: 16px;
	}


    .platforms-row {
      display: flex;
      gap: 20px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .platform {
      flex: 1;
      min-width: 200px;
      padding: 15px;
      background: rgba(60, 40, 30, 0.75);
      border: 1px solid #5b5041;
      border-radius: 8px;
      box-shadow: inset 0 0 8px rgba(0,0,0,0.5);
    }

    .asset {
      margin: 6px 0;
    }

	a {
	padding: 4px;
		background: #8b6f47;
		color: white;
		font-size: 14px;
		border: 1px solid #c9a86a;
		display: inline-block;
		border-radius: 5px;
		text-decoration: none;
	}
	
    .asset a {
      display: inline-block;
      padding: 8px 12px;
      background: #8b6f47;
      color: white;
      border-radius: 5px;
      text-decoration: none;
      font-size: 14px;
      border: 1px solid #c9a86a;
    }

    .asset a:hover {
      background: #c9a86a;
    }

    #older-releases {
      display: none;
      margin-top: 20px;
      animation: fadeIn 0.4s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0 }
      to { opacity: 1 }
    }

    .button {
      display: block;
      width: fit-content;
      margin: 0 auto;
      padding: 12px 20px;
      background: #c9a86a;
      color: #000;
      font-weight: bold;
      border-radius: 8px;
      text-decoration: none;
      cursor: pointer;
      border: 2px solid #8b6f47;
      box-shadow: 0 0 8px #000;
    }

    .button:hover {
      background: #e6c98f;
    }

    .loading {
      text-align: center;
      font-size: 18px;
      margin-top: 40px;
    }
	.center {
		display: inline-block; margin: 0 auto;
		}
	.pcenter {
		text-align:center;
	}
	.right {
		display: block; text-align: right;
	}
	.play {
		padding: 10px;
	}
  </style>
</head>

<body>
  <div class="overlay">

    <h1>TS2 Client</h1>
    <div class="subtitle">Il client ufficiale di Tempora Sanguinis 2</div>

    <div class="section">
      <p class="pcenter">
		Benvenuto avventuriero! Gioca a Tempora Sanguinis, il gioco di ruolo e d'azione testuale (Mud A-RPG).
        Il <strong>TS2 WebClient</strong> è una finestra magica che ti permette di osservare e interagire
        con il mondo di gioco direttamente dal tuo browser. Include il mapper, trigger, alias e tutto il resto
		che ti aspetteresti in un client moderno. E non richiede alcuna installazione!
      </p>
	  <p class="pcenter">
		<a class="play center" href="https://www.temporasanguinis.it/client">Premi qui per giocare</a>
	  </p>
	  <p class="pcenter">
		Puoi aggiungerlo alla barra delle applicazioni per accederci più facilmente.<br>Oppure se vuoi proprio lanciarlo localmente come una applicazione classica, procedi a scaricare dalla sezione in basso.
		<div class="contrib">
		  <style>.pp-XF3YPVYKFERC2{text-align:center;border:none;border-radius:1.5rem;min-width:11.625rem;padding:0 2rem;height:2rem;font-weight:bold;background-color:#FFD140;color:#000000;font-family:"Helvetica Neue",Arial,sans-serif;font-size:0.875rem;line-height:1.125rem;cursor:pointer;}</style>
		  <form action="https://www.paypal.com/ncp/payment/XF3YPVYKFERC2" method="post" target="_blank" style="display:inline-grid;justify-items:center;align-content:start;gap:0.5rem;">
			<input class="pp-XF3YPVYKFERC2" type="submit" value="Contribuisci" />
			<img src=https://www.paypalobjects.com/images/Debit_Credit_APM.svg alt="cards" />
			<section style="font-size: 0.75rem;"> Powered by <img src="https://www.paypalobjects.com/paypal-ui/logos/svg/paypal-wordmark-color.svg" alt="paypal" style="height:0.875rem;vertical-align:middle;"/></section>
		  </form>
		</div>
	  </p>
    </div>

    <div class="section">
      <h2>Scarica il client binario (eseguibile)</h2>

      <div id="latest-release">
        <div class="loading">Caricamento ultima release…</div>
      </div>

      <div class="button" onclick="toggleOlderReleases()">
        Mostra le Release Precedenti
      </div>

      <div id="older-releases">
        <div id="older-list"></div>
      </div>
    </div>

  </div>

  <script>
    const owner = "temporasanguinis";
    const repo = "TS2-Client";
    let olderLoaded = false;

    function toggleOlderReleases() {
      const container = document.getElementById("older-releases");
      const isHidden = getComputedStyle(container).display === "none";
      container.style.display = isHidden ? "block" : "none";

      if (isHidden && !olderLoaded) {
        loadOlderReleases();
        olderLoaded = true;
      }
    }

    function groupAssets(rel) {
      const platforms = { Windows: [], Linux: [], Mac: [] };

      rel.assets.forEach(a => {
        if (a.name === "release_web.zip" || a.name === "telnet_proxy.js") return;

        const lower = a.name.toLowerCase();

        if (lower.includes("win") || lower.endsWith(".exe")) platforms.Windows.push(a);
        else if (lower.includes("linux") || lower.includes("appimage")) platforms.Linux.push(a);
        else if (lower.includes("mac") || lower.includes("osx") || lower.endsWith(".dmg")) platforms.Mac.push(a);
      });

      return platforms;
    }

    function renderRelease(rel) {
      const div = document.createElement("div");
      div.className = "release";

      div.innerHTML = `
	  <div class="release-header">
		<span class="release-title">${rel.name || rel.tag_name}</span>
		<span class="release-date">Pubblicata il: ${new Date(rel.published_at).toLocaleDateString("it-IT")}</span>
	  </div>
	  <p>${rel.body ? rel.body.replace(/\n/g, "<br>") : "Nessuna descrizione disponibile."}</p>
	`;


      const platforms = groupAssets(rel);
      const row = document.createElement("div");
      row.className = "platforms-row";

      ["Windows", "Linux", "Mac"].forEach(platform => {
        if (platforms[platform].length > 0) {
          const pDiv = document.createElement("div");
          pDiv.className = "platform";
          pDiv.innerHTML = `<h3>${platform}</h3>`;

          platforms[platform].forEach(a => {
            const asset = document.createElement("div");
            asset.className = "asset";
            asset.innerHTML = `<a href="${a.browser_download_url}" download>${a.name}</a>`;
            pDiv.appendChild(asset);
          });

          row.appendChild(pDiv);
        }
      });

      div.appendChild(row);
      return div;
    }

    async function loadLatestRelease() {
      const container = document.getElementById("latest-release");
      const res = await fetch(`https://api.github.com/repos/${owner}/${repo}/releases`);
      const releases = await res.json();

      container.innerHTML = "";
      container.appendChild(renderRelease(releases[0]));
    }

    async function loadOlderReleases() {
      const container = document.getElementById("older-list");
      const res = await fetch(`https://api.github.com/repos/${owner}/${repo}/releases`);
      const releases = await res.json();

      releases.slice(1).forEach(rel => {
        container.appendChild(renderRelease(rel));
      });
    }

    loadLatestRelease();
  </script>

</body>
</html>
